# 📋 Reelshorter — PRD (Product Requirements Document)

## 문서 정보

| 항목 | 내용 |
|------|------|
| 프로젝트명 | Reelshorter |
| 버전 | 1.0 (MVP) |
| 작성일 | 2025-02 |
| 상태 | 기획 중 |

---

## 1. 프로젝트 개요

### 1.1 한 줄 요약
> 영상 하나를 업로드하면 YouTube Shorts와 Instagram Reels에 동시에 게시해주는 웹 서비스

### 1.2 문제 정의
```
현재 상황:
- 크리에이터가 쇼츠/릴스 콘텐츠를 만들면
- YouTube 앱 열고 업로드
- Instagram 앱 열고 같은 영상 다시 업로드
- 제목, 설명, 해시태그 각각 입력
- 플랫폼마다 2~5분씩 소요

문제:
- 반복 작업으로 시간 낭비
- 실수로 한 플랫폼 빼먹음
- 플랫폼별 최적 시간에 올리기 어려움
```

### 1.3 해결책
```
Reelshorter로:
- 영상 1번 업로드
- 제목/설명 1번 입력
- YouTube + Instagram 동시 게시
- 업로드 이력 한눈에 확인
```

### 1.4 목표 사용자
```
1차 타겟: 1인 크리에이터, 소규모 콘텐츠 제작자
         - 쇼츠/릴스 자주 올림
         - 여러 플랫폼 동시 운영
         - 시간 절약 필요

2차 타겟: 소규모 마케팅팀, 소셜 미디어 매니저
         - 브랜드 계정 여러 개 관리
         - 효율적인 워크플로우 필요
```

---

## 2. 기능 요구사항

### 2.1 MVP 기능 (v1.0)

#### F1. 회원가입/로그인
| ID | 기능 | 우선순위 | 상세 |
|----|------|---------|------|
| F1.1 | 이메일 회원가입 | P1 | 이메일 + 비밀번호로 가입 |
| F1.2 | 이메일 로그인 | P1 | 가입한 계정으로 로그인 |
| F1.3 | 구글 로그인 | P2 | OAuth로 간편 로그인 (선택) |
| F1.4 | 로그아웃 | P1 | 세션 종료 |

#### F2. 플랫폼 연결 (OAuth)
| ID | 기능 | 우선순위 | 상세 |
|----|------|---------|------|
| F2.1 | YouTube 연결 | P1 | OAuth로 YouTube 채널 연결 |
| F2.2 | YouTube 연결 해제 | P1 | 연결된 채널 해제 |
| F2.3 | YouTube 연결 상태 표시 | P1 | 연결됨/미연결 UI 표시 |
| F2.4 | Instagram 연결 | P2 | OAuth로 Instagram 비즈니스 계정 연결 |
| F2.5 | Instagram 연결 해제 | P2 | 연결된 계정 해제 |
| F2.6 | Instagram 연결 상태 표시 | P2 | 연결됨/미연결 UI 표시 |

#### F3. 영상 업로드
| ID | 기능 | 우선순위 | 상세 |
|----|------|---------|------|
| F3.1 | 영상 파일 선택 | P1 | 로컬에서 영상 파일 선택 |
| F3.2 | 영상 미리보기 | P2 | 선택한 영상 썸네일/재생 |
| F3.3 | 제목 입력 | P1 | 영상 제목 (플랫폼 공통) |
| F3.4 | 설명 입력 (플랫폼별) | P1 | YouTube용/Instagram용 설명 각각 입력 |
| F3.5 | 플랫폼 선택 | P1 | YouTube/Instagram 체크박스 |
| F3.6 | 업로드 실행 | P1 | 선택한 플랫폼에 영상 게시 |
| F3.7 | 업로드 진행률 표시 | P2 | 진행 상태 프로그레스 바 |
| F3.8 | 업로드 결과 표시 | P1 | 성공/실패 메시지, 영상 URL |

#### F4. 업로드 이력
| ID | 기능 | 우선순위 | 상세 |
|----|------|---------|------|
| F4.1 | 이력 목록 조회 | P1 | 날짜, 플랫폼, 제목, 상태 표시 |
| F4.2 | 이력 상세 보기 | P2 | 에러 메시지, 영상 URL 등 |
| F4.3 | 이력 필터링 | P3 | 플랫폼별, 상태별 필터 |

#### F5. 계정 설정
| ID | 기능 | 우선순위 | 상세 |
|----|------|---------|------|
| F5.1 | 비밀번호 변경 | P2 | 현재 비번 확인 후 변경 |
| F5.2 | 계정 삭제 | P3 | 모든 데이터 삭제 |

### 2.2 우선순위 정의
```
P1 (Must Have):  MVP 출시에 반드시 필요
P2 (Should Have): 있으면 좋지만 없어도 출시 가능
P3 (Nice to Have): 후속 버전에서 추가
```

### 2.3 MVP 범위 외 (v2.0 이후)
```
- 예약 게시 (특정 시간에 자동 업로드)
- TikTok 연동
- 팀 기능 (여러 사람이 한 계정 관리)
- 분석 대시보드 (조회수, 좋아요 통계)
- 영상 편집 기능 (자르기, 자막)
- 벌크 업로드 (여러 영상 한번에)
```

---

## 3. 유저 플로우

### 3.1 신규 가입 → 첫 업로드

```
┌─────────────────────────────────────────────────────────────┐
│                      신규 유저 플로우                         │
└─────────────────────────────────────────────────────────────┘

[1. 랜딩 페이지]
     │
     ▼
[2. 회원가입]
     │  이메일 + 비밀번호 입력
     │  (또는 구글 로그인)
     ▼
[3. 대시보드]
     │  "플랫폼을 연결해주세요" 안내 표시
     │
     ▼
[4. 플랫폼 연결 페이지]
     │
     ├──→ [YouTube 연결 버튼 클릭]
     │         │
     │         ▼
     │    [구글 로그인 팝업]
     │         │
     │         ▼
     │    [채널 접근 권한 허용]
     │         │
     │         ▼
     │    [연결 완료 ✅]
     │
     └──→ [Instagram 연결 버튼 클릭] (선택)
               │
               ▼
          [Facebook 로그인]
               │
               ▼
          [연결 완료 ✅]
     │
     ▼
[5. 대시보드로 돌아옴]
     │  연결된 플랫폼 표시됨
     │
     ▼
[6. 영상 업로드]
     │  - 파일 선택
     │  - 제목/설명 입력
     │  - 플랫폼 선택 (YouTube ✓, Instagram ✓)
     │  - [업로드] 버튼 클릭
     │
     ▼
[7. 업로드 진행 중]
     │  프로그레스 바 표시
     │
     ▼
[8. 업로드 완료]
     │  - "YouTube 업로드 성공 ✅"
     │  - "Instagram 업로드 성공 ✅"
     │  - 영상 URL 링크 제공
     │
     ▼
[9. 이력 페이지에서 확인 가능]
```

### 3.2 재방문 유저

```
[로그인] → [대시보드] → [영상 업로드] → [완료]
```

### 3.3 플랫폼 연결 해제

```
[설정 페이지] → [YouTube 연결 해제 클릭] → [확인 팝업] → [해제 완료]
```

---

## 4. 화면 설계

### 4.1 화면 목록

| 화면 | URL | 설명 |
|------|-----|------|
| 랜딩 | `/` | 서비스 소개, 가입/로그인 버튼 |
| 로그인 | `/login` | 이메일 로그인 폼 |
| 회원가입 | `/signup` | 이메일 가입 폼 |
| 대시보드 | `/dashboard` | 메인 화면, 영상 업로드 폼 |
| 플랫폼 연결 | `/dashboard/connections` | YouTube/Instagram 연결 관리 |
| 업로드 이력 | `/dashboard/history` | 과거 업로드 목록 |
| 계정 설정 | `/dashboard/settings` | 비밀번호 변경, 계정 삭제 |

### 4.2 대시보드 화면 구성

```
┌───────────┬─────────────────────────────────────────────────┐
│  [로고]   │                          [이메일] [로그아웃]     │
├───────────┼─────────────────────────────────────────────────┤
│           │                                                 │
│ 📤 업로드  │   영상 업로드                                   │
│           │   ┌───────────────────────────────────────┐     │
│ 🔗 연결   │   │    📁 파일을 선택하거나 드래그          │     │
│           │   └───────────────────────────────────────┘     │
│ 📋 이력   │                                                 │
│           │   ┌─ 🔴 YouTube Shorts ──── [☑ 업로드] ──┐     │
│ ⚙️ 설정   │   │  제목: [________________________]     │     │
│           │   │  설명: [________________________]     │     │
│           │   └──────────────────────────────────────┘     │
│           │                                                 │
│           │   ┌─ 📷 Instagram Reels ─── [☐ 업로드] ──┐     │
│           │   │  제목: [_________(비활성)__________]   │     │
│           │   │  설명: [_________(비활성)__________]   │     │
│           │   └──────────────────────────────────────┘     │
│           │                                                 │
│           │              [🚀 업로드하기]                     │
│           │                                                 │
└───────────┴─────────────────────────────────────────────────┘
```

### 4.3 플랫폼 연결 화면

```
┌─────────────────────────────────────────────────────────────┐
│  플랫폼 연결 관리                                            │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  ┌─ YouTube ─────────────────────────────────────────────┐  │
│  │                                                       │  │
│  │  🔴 YouTube    ✅ 연결됨                              │  │
│  │                                                       │  │
│  │  채널: 내 유튜브 채널                                  │  │
│  │  연결일: 2025-02-10                                   │  │
│  │                                                       │  │
│  │                              [연결 해제]              │  │
│  └───────────────────────────────────────────────────────┘  │
│                                                             │
│  ┌─ Instagram ───────────────────────────────────────────┐  │
│  │                                                       │  │
│  │  📷 Instagram    ❌ 미연결                            │  │
│  │                                                       │  │
│  │  Instagram 비즈니스 계정을 연결하면                     │  │
│  │  릴스를 자동으로 업로드할 수 있습니다.                  │  │
│  │                                                       │  │
│  │                              [Instagram 연결]         │  │
│  └───────────────────────────────────────────────────────┘  │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

---

## 5. 기술 요구사항

### 5.1 기술 스택

| 영역 | 기술 | 비고 |
|------|------|------|
| 프레임워크 | Next.js 14 (App Router) | 풀스택 |
| 언어 | TypeScript | 타입 안전성 |
| 스타일링 | Tailwind CSS | 유틸리티 퍼스트 |
| 인증 | NextAuth.js (Auth.js) | OAuth, 세션 관리 |
| DB | Prisma + SQLite → PostgreSQL | ORM |
| 배포 | Vercel | 서버리스 |
| 외부 API | YouTube Data API v3, Instagram Graph API | 영상 업로드 |

### 5.2 DB 테이블

```
User          유저 정보 (이메일, 비밀번호 해시)
Account       OAuth 계정 (NextAuth용)
Connection    플랫폼 연결 (YouTube/Instagram 토큰)
PublishLog    업로드 이력
```

### 5.3 API 엔드포인트

| Method | Endpoint | 설명 |
|--------|----------|------|
| POST | `/api/auth/signup` | 회원가입 |
| POST | `/api/auth/[...nextauth]` | NextAuth (로그인 등) |
| GET | `/api/oauth/youtube` | YouTube OAuth 시작 |
| GET | `/api/oauth/youtube/callback` | YouTube 콜백 |
| GET | `/api/oauth/instagram` | Instagram OAuth 시작 |
| GET | `/api/oauth/instagram/callback` | Instagram 콜백 |
| GET | `/api/connections` | 연결된 플랫폼 목록 |
| DELETE | `/api/connections?platform=youtube` | 연결 해제 |
| POST | `/api/publish` | 영상 업로드 |
| GET | `/api/logs` | 업로드 이력 조회 |

### 5.4 보안 요구사항

```
1. 비밀번호:     bcrypt 해싱 (salt 자동)
2. OAuth 토큰:  AES-256 암호화 후 DB 저장
3. 세션:        HTTP-only 쿠키 + JWT
4. HTTPS:       필수 (Vercel 자동 적용)
5. 환경변수:    .env.local (Git 제외)
```

### 5.5 파일 업로드 제약

```
지원 포맷:    MP4, MOV, WebM
최대 크기:    499MB
최대 길이:    180초 (3분)
해상도:       제한 없음 (플랫폼이 알아서 처리)
권장 비율:    9:16 (세로형)
```

### 5.6 파일 검증 에러 메시지

파일이 규격에 맞지 않을 경우, 원인을 명확히 알려주는 에러 메시지를 표시한다.

| 에러 유형 | 에러 메시지 (유저에게 표시) |
|----------|---------------------------|
| 파일 형식 | "지원하지 않는 파일 형식입니다. MP4, MOV, WebM 파일만 업로드할 수 있어요." |
| 파일 크기 초과 | "파일 크기가 너무 큽니다. 최대 499MB까지 업로드할 수 있어요. (현재: {실제크기}MB)" |
| 영상 길이 초과 | "영상이 너무 깁니다. 최대 3분(180초)까지 업로드할 수 있어요. (현재: {실제길이}초)" |
| 파일 손상 | "파일을 읽을 수 없습니다. 영상 파일이 손상되었거나 올바른 형식이 아닐 수 있어요." |
| 파일 없음 | "업로드할 파일을 선택해주세요." |

#### 에러 UI 설계

```
┌─────────────────────────────────────────────────────────────┐
│  ⚠️ 업로드할 수 없는 파일입니다                               │
│                                                             │
│  영상이 너무 깁니다.                                         │
│  최대 3분(180초)까지 업로드할 수 있어요. (현재: 245초)         │
│                                                             │
│  💡 Tip: 영상 편집 앱에서 길이를 줄여서 다시 시도해보세요.      │
│                                                             │
│                                      [다른 파일 선택]        │
└─────────────────────────────────────────────────────────────┘
```

#### 검증 순서

```
1. 파일 존재 여부 확인
2. 파일 확장자 확인 (MP4, MOV, WebM)
3. 파일 크기 확인 (≤ 499MB)
4. 영상 메타데이터 읽기 (길이 확인)
5. 영상 길이 확인 (≤ 180초)
6. 모두 통과 시 업로드 진행
```

---

## 6. 비기능 요구사항

### 6.1 성능
```
- 페이지 로드: 3초 이내
- 업로드 시작: 선택 후 2초 이내 시작
- API 응답: 500ms 이내 (업로드 제외)
```

### 6.2 가용성
```
- MVP 단계: 99% 목표 (Vercel 기본)
- 에러 발생 시 사용자에게 명확한 메시지
```

### 6.3 확장성
```
- MVP: 동시 사용자 100명 지원
- 확장: 필요시 Vercel Pro 업그레이드
```

---

## 7. 마일스톤

### Phase 1: 기반 구축 (1주)
```
- [ ] 프로젝트 셋업 (Next.js, Prisma, NextAuth)
- [ ] DB 스키마 정의
- [ ] 기본 레이아웃 구현
- [ ] 회원가입/로그인 구현
```

### Phase 2: YouTube 연동 (1주)
```
- [ ] YouTube OAuth 구현
- [ ] 토큰 암호화 저장
- [ ] 연결 상태 UI
- [ ] 연결 해제 기능
```

### Phase 3: 영상 업로드 (1주)
```
- [ ] 업로드 폼 UI
- [ ] YouTube 업로드 API 연동
- [ ] 업로드 이력 저장
- [ ] 결과 표시
```

### Phase 4: 마무리 & 배포 (1주)
```
- [ ] 이력 페이지
- [ ] 설정 페이지
- [ ] 에러 처리 보강
- [ ] Vercel 배포
- [ ] 테스트
```

### Phase 5: Instagram 추가 (추후)
```
- [ ] Meta 앱 심사 통과 후
- [ ] Instagram OAuth
- [ ] 릴스 업로드
```

---

## 8. 리스크 & 대응

| 리스크 | 가능성 | 영향 | 대응 |
|--------|--------|------|------|
| YouTube API 할당량 초과 | 중 | 높 | 사용량 모니터링, 필요시 할당량 증가 요청 |
| Instagram 앱 심사 지연 | 높 | 중 | YouTube 먼저 출시, Instagram은 추후 |
| 대용량 영상 업로드 실패 | 중 | 중 | 파일 크기 제한 안내, 청크 업로드 검토 |
| OAuth 토큰 만료 | 중 | 중 | 자동 갱신 로직, 재연결 유도 UI |

---

## 9. 성공 지표 (KPI)

### MVP 출시 기준
```
- [ ] 회원가입 → 로그인 → YouTube 연결 → 업로드 플로우 완성
- [ ] 업로드 성공률 95% 이상
- [ ] 주요 에러 케이스 처리 완료
```

### 출시 후 지표
```
- 가입자 수
- 일일 활성 사용자 (DAU)
- 업로드 건수
- 플랫폼별 연결 비율
- 에러 발생률
```

---

## 10. 용어 정의

| 용어 | 설명 |
|------|------|
| OAuth | 비밀번호 없이 다른 서비스(YouTube 등)에 접근 권한을 얻는 인증 방식 |
| 액세스 토큰 | API 호출 시 사용하는 임시 열쇠 (유효기간 짧음) |
| 리프레시 토큰 | 액세스 토큰 만료 시 새로 발급받는 데 쓰는 열쇠 |
| Shorts | YouTube의 세로형 짧은 영상 (60초 이하) |
| Reels | Instagram의 세로형 짧은 영상 (90초 이하) |
| MVP | Minimum Viable Product, 핵심 기능만 있는 최소 버전 |
